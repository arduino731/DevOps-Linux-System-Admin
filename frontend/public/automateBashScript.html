<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Automate with Bash Script</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      background: #f9f9f9;
    }
    h1, h2, h3 {
      color: #333;
    }
    code, pre {
      background-color: #eee;
      padding: 0.5rem;
      display: block;
      overflow-x: auto;
      margin: 1rem 0;
      border-radius: 5px;
    }
    .section {
      background: #fff;
      padding: 1.5rem;
      margin-bottom: 2rem;
      border-left: 5px solid #007acc;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>

  <h1>Automating Setup with a Bash Script</h1>

  <div class="section">
    <h2>ğŸš€ What This Script Does</h2>
    <ul>
      <li>Stops old containers</li>
      <li>Rebuilds your Node.js app</li>
      <li>Runs Node.js and Nginx containers with volume mounts</li>
      <li>Installs Git, Docker, Docker Compose</li>
      <li>Clones your GitHub repo</li>
      <li>Builds and starts frontend/backend containers</li>
    </ul>
  </div>

  <div class="section">
    <h2>âœ… setup.sh</h2>
    <pre><code>#!/bin/bash

# Exit immediately on error
set -e

echo "ğŸ”„ Updating system packages..."
sudo apt update && sudo apt upgrade -y

echo "ğŸ™ Installing Git..."
sudo apt install -y git

echo "ğŸ³ Installing Docker..."
sudo apt install -y docker.io

echo "ğŸ§± Installing Docker Compose..."
sudo apt install -y docker-compose

echo "ğŸ“ Cloning your GitHub repo..."
git clone https://github.com/arduino731/DevOps-Linux-System-Admin.git
cd DevOps-Linux-System-Admin

echo "ğŸš€ Building and running Docker containers..."
docker compose up -d --build

echo "âœ… Setup complete! Frontend running on http://localhost:8080 and backend on http://localhost:5001"
</code></pre>
  </div>

  <div class="section">
    <h2>ğŸ’¡ Instructions</h2>
    <p>Save as <code>setup.sh</code>, then run:</p>
    <pre><code>chmod +x setup.sh
./setup.sh</code></pre>
  </div>

  <div class="section">
    <h2>âš ï¸ Requirements</h2>
    <p>Your repo must contain a <code>docker-compose.yml</code> that defines:</p>
    <ul>
      <li>Frontend on port 8080</li>
      <li>Backend on port 5001</li>
    </ul>
  </div>

  <div class="section">
    <h2>âœ… docker-compose.yml</h2>
    <pre><code>services:
  frontend:
    build:
      context: ./frontend
    ports:
      - "8080:80"
    volumes:
      - ./frontend/public:/usr/share/nginx/html
    container_name: frontend_container

  backend:
    build:
      context: ./backend
    ports:
      - "5001:5001"
    container_name: backend_container
</code></pre>
  </div>

  <div class="section">
    <h2>ğŸ“ Expected Directory Structure</h2>
    <pre><code>DevOps-Linux-System-Admin/
â”œâ”€â”€ setup.sh
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ public/
â”‚       â””â”€â”€ index.html
â””â”€â”€ backend/
    â”œâ”€â”€ Dockerfile
    â””â”€â”€ app.js</code></pre>
  </div>

  <div class="section">
    <h2>âœ… frontend/Dockerfile</h2>
    <pre><code>FROM nginx:alpine
COPY public/ /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
  </div>

  <div class="section">
    <h2>âœ… backend/Dockerfile</h2>
    <pre><code>FROM node:22-alpine
WORKDIR /usr/src/app
COPY . .
RUN npm install
EXPOSE 5001
CMD ["node", "app.js"]
</code></pre>
  </div>

  <div class="section">
    <h2>âœ… Example backend/app.js</h2>
    <pre><code>const express = require('express');
const app = express();
const port = 5001;

app.get('/', (req, res) => {
  res.send('Hello from the backend!');
});

app.listen(port, () => {
  console.log(`Backend is running on http://localhost:${port}`);
});
</code></pre>
  </div>

</body>
</html>
